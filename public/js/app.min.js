"use strict";function showLastLine(e){var t=e.val();$lastLine.innerHTML=t.lines?t.lines.pop():"No poem yet! Start one now by texting the number above"}function renderDate(e){var t=e.getUTCFullYear(),n=e.getMonth()+1,i=e.getDate(),o=String("00"+e.getHours()).slice(-2),r=String("00"+e.getMinutes()).slice(-2);return n+"/"+i+"/"+t+" "+o+":"+r}var currentRef=new Firebase("https://exquisitehues.firebaseio.com/current"),poemsRef=new Firebase("https://exquisitehues.firebaseio.com/poems"),$lastLine=document.getElementById("lastline"),$poems=document.getElementById("poems");$lastLine&&currentRef.on("value",showLastLine),$poems&&poemsRef.orderByPriority().limitToLast(1).on("value",function(e){$poems.innerHTML="",e.forEach(function(e){var t=e.val(),n=document.createElement("section"),i=document.getElementById("title"),o=document.getElementById("time"),r=new Date(t.timestamp);i.innerText=e.key(),o.innerText=isNaN(r)?"unknown":renderDate(r),t.lines.forEach(function(e){var t=document.createElement("p");t.innerText=e,n.appendChild(t)}),$poems.appendChild(n)})});